generator client {
  provider = "prisma-client-js"
  output   = "../generated/prisma"
}

datasource db {
  provider = "postgresql"
}

model project_images {
  id            Int       @id @default(autoincrement())
  project_id    Int?
  filename      String    @db.VarChar(255)
  display_order Int?      @default(0)
  is_cover      Boolean?  @default(false)
  alt_text      String?
  projects      projects? @relation(fields: [project_id], references: [id], onDelete: Cascade, onUpdate: NoAction)

  @@unique([project_id, filename])
  @@index([project_id, display_order], map: "idx_images_project")
}

/// This table contains check constraints and requires additional setup for migrations. Visit https://pris.ly/d/check-constraints for more info.
model projects {
  id             Int              @id @default(autoincrement())
  slug           String           @unique @db.VarChar(255)
  name           String           @db.VarChar(255)
  month          Int
  year           Int
  project_date   DateTime         @db.Date
  year_label     String?          @db.VarChar(20)
  role           String?
  overview       String?
  short_desc     String?          @db.VarChar(500)
  category       String?          @db.VarChar(100)
  tags           String[]
  folder_mtime   BigInt?
  last_synced_at DateTime?        @default(now()) @db.Timestamp(6)
  created_at     DateTime?        @default(now()) @db.Timestamp(6)
  project_images project_images[]

  @@index([category], map: "idx_projects_category")
  @@index([tags], map: "idx_projects_tags", type: Gin)
  @@index([project_date(sort: Desc)], map: "idx_projects_timeline")
}
